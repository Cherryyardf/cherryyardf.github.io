<!-- Application Structure Plan:
    1.  **Persistence:** Uses localStorage to remember language selection across pages.
    2.  **Language Switcher:** In Navbar and Modal.
    3.  **Content:** Full resident features (Events, Barometer, etc.).
-->

<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FÃ¼r Gemeinden - BAUKOMPASS</title>
    <title>Unser Quartier - BÃ¼rgerbeteiligung</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- GRUNDEINSTELLUNGEN --- */
        :root {
            --bg-color: #f8f1d9;
            --text-color: #222;
            --accent-color: #2c3e50;
            --active-tab: #e67e22;
        }
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; }
        body { font-family: 'Inter', sans-serif; background-color: #fff7ed; color: #431407; }

        /* Navigation */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; background: white; border-bottom: 1px solid #e0e0e0; }
        .nav-links a { text-decoration: none; color: var(--text-color); font-weight: bold; font-size: 0.9rem; text-transform: uppercase; }
        .logo { font-weight: 900; font-size: 1.5rem; letter-spacing: 2px; text-transform: uppercase; text-decoration: none; color: black; }

        /* Layout */
        .content-wrapper { width: 100%; max-width: 1920px; margin: 0 auto; padding: 20px 0; }
        .header-section { text-align: center; margin: 40px 0; padding: 0 20px; }
        .header-section h1 { font-size: 2.5rem; color: var(--accent-color); margin-bottom: 10px; }

        /* Tabs */
        .tab-container { display: flex; justify-content: center; border-bottom: 2px solid #ccc; margin-bottom: 40px; background: white; padding-top: 20px; }
        .tab-button { background-color: transparent; border: none; outline: none; cursor: pointer; padding: 14px 40px; font-size: 1.1rem; font-weight: bold; color: #666; border-bottom: 4px solid transparent; transition: 0.3s; }
        .tab-button:hover { color: var(--accent-color); background: #f9f9f9; }
        .tab-button.active { color: var(--accent-color); border-bottom: 4px solid var(--active-tab); }
        .tab-content { display: none; animation: fadeEffect 0.5s; }

        /* Inhalte */
        .text-content-limit { max-width: 800px; margin: 0 auto; padding: 0 20px; }
        .info-block { background: white; padding: 40px; margin-bottom: 30px; border-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .info-block h2 { color: var(--accent-color); border-bottom: 2px solid var(--bg-color); padding-bottom: 10px; }

        /* Tool Wrapper */
        .tool-wrapper { width: 96%; margin: 0 auto; background: white; border-radius: 8px; overflow: hidden; min-height: 800px; }
        
        @keyframes fadeEffect { from {opacity: 0;} to {opacity: 1;} }
        /* Custom Chart Container */
        .gauge-container { position: relative; width: 100%; max-width: 400px; margin: 0 auto; height: 250px; }
        .barometer-btn { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .barometer-btn:hover { transform: scale(1.05); }
        .barometer-btn:active { transform: scale(0.95); }
        .prio-card { transition: all 0.3s ease; cursor: pointer; }
        .prio-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .prio-card.selected { border-color: #f97316; background-color: #ffedd5; }
        .action-btn { transition: background-color 0.2s; }
        .action-btn:hover { background-color: #f97316; color: white; border-color: #f97316; }
        #location-modal { transition: opacity 0.3s ease-in-out; }
        #location-modal.hidden { opacity: 0; pointer-events: none; }

        /* Flag Button Styles - Consistent across all pages */
        .lang-btn {
            background: none; border: none; font-size: 1.5rem; cursor: pointer;
            opacity: 0.5; transition: opacity 0.2s, transform 0.2s; padding: 0 5px;
        }
        .lang-btn:hover { opacity: 1; transform: scale(1.1); }
        .lang-btn.active { opacity: 1; transform: scale(1.2); font-weight: bold; }
    </style>
</head>
<body>
<body class="flex flex-col min-h-screen overflow-hidden" id="main-body">

    <!-- LOCATION MODAL -->
    <div id="location-modal" class="fixed inset-0 z-[100] bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 border-t-4 border-orange-500 animate-bounce-in relative">
            <div class="absolute top-4 right-4 flex gap-2">
                <button onclick="changeLanguage('de')" class="lang-btn active" data-lang="de">ğŸ‡©ğŸ‡ª</button>
                <button onclick="changeLanguage('en')" class="lang-btn" data-lang="en">ğŸ‡¬ğŸ‡§</button>
                <button onclick="changeLanguage('fr')" class="lang-btn" data-lang="fr">ğŸ‡«ğŸ‡·</button>
            </div>
            <div class="text-center mb-6">
                <span class="text-4xl mb-2 block">ğŸŒ</span>
                <h2 class="text-2xl font-bold text-slate-800" data-i18n="modal_title">Willkommen im Quartier!</h2>
                <p class="text-slate-500 text-sm mt-2" data-i18n="modal_desc">Damit wir Sie mit Ihrer Nachbarschaft verbinden kÃ¶nnen, benÃ¶tigen wir kurz Ihre Region.</p>
            </div>
            <form id="location-form" onsubmit="handleLocationSubmit(event)" class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="lbl_country">Land</label>
                    <select id="country-select" class="w-full p-3 rounded-lg bg-slate-50 border border-slate-200 focus:border-orange-500 outline-none transition-colors">
                        <option value="DE">Deutschland ğŸ‡©ğŸ‡ª</option>
                        <option value="BE">Belgien ğŸ‡§ğŸ‡ª</option>
                        <option value="NL">Niederlande ğŸ‡³ğŸ‡±</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="lbl_zip">Postleitzahl</label>
                    <input id="plz-input" type="text" placeholder="z.B. 52152" class="w-full p-3 rounded-lg bg-slate-50 border border-slate-200 focus:border-orange-500 outline-none transition-colors" required>
                </div>
                <div id="location-error" class="hidden text-red-500 text-xs text-center font-bold bg-red-50 p-2 rounded" data-i18n="modal_error">
                    Diese PLZ liegt leider auÃŸerhalb unseres Pilotgebiets.
                </div>
                <button type="submit" class="w-full bg-orange-600 text-white font-bold py-3 rounded-lg hover:bg-orange-700 transition-transform active:scale-95 shadow-lg shadow-orange-200" data-i18n="btn_enter">
                    Zum Quartier
                </button>
            </form>
        </div>
    </div>

    <nav>
        <div class="nav-links"><a href="index.html">&larr; ZurÃ¼ck zur Ãœbersicht</a></div>
        <a href="index.html" class="logo">BAUKOMPASS</a>
    <!-- Navbar -->
    <nav class="bg-white shadow-sm border-b border-orange-100 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href='index.html'">
                <span class="text-2xl">ğŸ¡</span>
                <div class="flex flex-col leading-tight">
                    <span class="font-bold text-lg text-slate-800 tracking-tight" data-i18n="nav_title">Unser Quartier</span>
                    <span id="header-location" class="text-xs text-orange-600 font-semibold uppercase" data-i18n="nav_subtitle">Region wÃ¤hlen...</span>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="hidden md:block text-xs font-medium bg-orange-100 text-orange-800 px-3 py-1 rounded-full" data-i18n="nav_phase">
                    Phase: BÃ¼rger-Dialog
                </div>
                <!-- Global Language Switcher -->
                <div class="flex gap-2 border-l border-slate-200 pl-4">
                    <button onclick="changeLanguage('de')" class="lang-btn active" data-lang="de">ğŸ‡©ğŸ‡ª</button>
                    <button onclick="changeLanguage('en')" class="lang-btn" data-lang="en">ğŸ‡¬ğŸ‡§</button>
                    <button onclick="changeLanguage('fr')" class="lang-btn" data-lang="fr">ğŸ‡«ğŸ‡·</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="header-section">
        <h1>Von Gemeinden fÃ¼r Gemeinden</h1>
        <p>WÃ¤hlen Sie einen Bereich:</p>
    </div>
    <!-- Main Content -->
    <main class="flex-grow max-w-5xl mx-auto px-4 py-8 w-full space-y-12">
        <section class="text-center max-w-3xl mx-auto mt-4 mb-8">
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-4 leading-tight">
                <span data-i18n="hero_title_1">Wie soll sich</span> 
                <span id="hero-city-name" class="text-orange-600 underline decoration-4 decoration-orange-200" data-i18n="hero_title_city">unsere Stadt</span> 
                <span data-i18n="hero_title_2">entwickeln?</span>
            </h1>
            <p class="text-lg text-slate-600" data-i18n="hero_desc">Leerstand vermeiden, Wohnraum schaffen, Charakter bewahren. Ihre Stimmung und Ihre PrioritÃ¤ten sind unser Kompass.</p>
        </section>

    <div class="tab-container">
        <button class="tab-button active" onclick="openTab(event, 'Info')">Informationen</button>
        <button class="tab-button" onclick="openTab(event, 'Tool')">Immobilien-Tool</button>
    </div>
        <!-- Events & Leih-Bar -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-orange-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-wider" data-i18n="badge_soon">DemnÃ¤chst</div>
                <div class="flex items-start gap-4">
                    <div class="bg-orange-50 text-orange-600 w-12 h-12 flex flex-col items-center justify-center rounded-lg font-bold border border-orange-100">
                        <span class="text-xs uppercase" data-i18n="date_day">So</span>
                        <span class="text-lg leading-none">14</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-800 text-lg" data-i18n="event_title">Quartiersflohmarkt</h3>
                        <p class="text-slate-500 text-sm mb-3" data-i18n="event_loc">Marktplatz, 14:00 Uhr</p>
                        <button class="text-orange-600 text-sm font-semibold hover:underline flex items-center">
                            <span class="mr-1">ğŸ“…</span> <span data-i18n="btn_calendar">Kalender Ã¶ffnen</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-green-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-wider" data-i18n="badge_avail">VerfÃ¼gbar</div>
                <div class="flex items-start gap-4">
                    <div class="bg-green-50 text-green-600 w-12 h-12 flex items-center justify-center rounded-lg text-2xl border border-green-100">ğŸš²</div>
                    <div>
                        <h3 class="font-bold text-slate-800 text-lg" data-i18n="rent_title">Leih-Bar: Lastenrad "E-Donkey"</h3>
                        <p class="text-slate-500 text-sm mb-3" data-i18n="rent_desc">Kostenlos ausleihen fÃ¼r 24h.</p>
                        <button onclick="alert('Reservierungs-Modul Ã¶ffnet sich...')" class="bg-slate-800 text-white px-3 py-1.5 rounded text-xs font-semibold hover:bg-slate-700 transition-colors" data-i18n="btn_reserve">Jetzt reservieren</button>
                    </div>
                </div>
            </div>
        </section>

    <main class="content-wrapper">
        <div id="Info" class="tab-content" style="display: block;">
            <div class="text-content-limit">
                <div class="info-block">
                    <h2>Gemeinsame Ziele erreichen</h2>
                    <p>Hier finden Sie Informationen zur kommunalen Zusammenarbeit und Strategieentwicklung.</p>
        <!-- Stimmungsbarometer -->
        <section class="bg-white rounded-3xl p-6 md:p-10 shadow-lg border border-orange-100">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                <div>
                    <h2 class="text-2xl font-bold text-slate-800 mb-2" data-i18n="baro_title">Das Stimmungsbarometer</h2>
                    <p class="text-slate-500 mb-8" data-i18n="baro_desc">Wie bewerten Sie die aktuelle Entwicklung in Ihrer Nachbarschaft?</p>
                    <div class="flex justify-between gap-4 mb-8">
                        <button onclick="voteSentiment(0)" class="barometer-btn flex flex-col items-center gap-2 w-1/3 group">
                            <div class="w-16 h-16 rounded-2xl bg-red-50 group-hover:bg-red-100 flex items-center justify-center text-3xl shadow-sm border border-red-100">ğŸ˜Ÿ</div>
                            <span class="text-xs font-bold text-red-600 uppercase tracking-wide" data-i18n="mood_bad">Besorgt</span>
                        </button>
                        <button onclick="voteSentiment(1)" class="barometer-btn flex flex-col items-center gap-2 w-1/3 group">
                            <div class="w-16 h-16 rounded-2xl bg-yellow-50 group-hover:bg-yellow-100 flex items-center justify-center text-3xl shadow-sm border border-yellow-100">ğŸ˜</div>
                            <span class="text-xs font-bold text-yellow-600 uppercase tracking-wide" data-i18n="mood_neutral">Neutral</span>
                        </button>
                        <button onclick="voteSentiment(2)" class="barometer-btn flex flex-col items-center gap-2 w-1/3 group">
                            <div class="w-16 h-16 rounded-2xl bg-green-50 group-hover:bg-green-100 flex items-center justify-center text-3xl shadow-sm border border-green-100">ğŸ˜Š</div>
                            <span class="text-xs font-bold text-green-600 uppercase tracking-wide" data-i18n="mood_good">Zuversichtlich</span>
                        </button>
                    </div>
                    <div id="vote-msg" class="text-center text-sm font-medium text-orange-600 opacity-0 transition-opacity" data-i18n="vote_thanks">Danke fÃ¼r Ihre Stimme!</div>
                </div>
                <div class="relative">
                    <div class="gauge-container">
                        <canvas id="sentimentChart"></canvas>
                        <div class="absolute top-[60%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center">
                            <div id="sentiment-score" class="text-4xl font-bold text-slate-800">72%</div>
                            <div class="text-xs text-slate-400 uppercase tracking-wider" id="sentiment-label" data-i18n="status_positive">Positiv</div>
                        </div>
                    </div>
                    <p class="text-center text-xs text-slate-400 mt-[-20px]"><span data-i18n="based_on">Basierend auf</span> <span id="vote-count">1.240</span> <span data-i18n="votes">Stimmen</span></p>
                </div>
            </div>
        </div>
        </section>

        <div id="Tool" class="tab-content">
            <div class="tool-wrapper">
                <iframe 
                    id="seamless-tool"
                    src="tool/index.html" 
                    scrolling="no"
                    style="width: 100%; border: none; overflow: hidden; display: block;"
                >
                </iframe>
        <!-- PrioritÃ¤ten -->
        <section>
            <h2 class="text-2xl font-bold text-slate-800 mb-6 text-center" data-i18n="prio_title">Worauf sollen wir uns fokussieren?</h2>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <div onclick="togglePrio(this)" class="prio-card bg-white p-6 rounded-xl border-2 border-transparent shadow-sm flex flex-col items-center text-center">
                    <div class="w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-4 text-xl">ğŸ”¨</div>
                    <h3 class="font-bold text-slate-800 mb-2" data-i18n="prio_1_title">Sanierung fÃ¶rdern</h3>
                    <p class="text-xs text-slate-500" data-i18n="prio_1_desc">Altbauten erhalten statt neu bauen.</p>
                </div>
                <div onclick="togglePrio(this)" class="prio-card bg-white p-6 rounded-xl border-2 border-transparent shadow-sm flex flex-col items-center text-center">
                    <div class="w-12 h-12 bg-green-50 text-green-500 rounded-full flex items-center justify-center mb-4 text-xl">ğŸŒ³</div>
                    <h3 class="font-bold text-slate-800 mb-2" data-i18n="prio_2_title">Mehr GrÃ¼nflÃ¤chen</h3>
                    <p class="text-xs text-slate-500" data-i18n="prio_2_desc">Versiegelte FlÃ¤chen entsiegeln.</p>
                </div>
                <div onclick="togglePrio(this)" class="prio-card bg-white p-6 rounded-xl border-2 border-transparent shadow-sm flex flex-col items-center text-center">
                    <div class="w-12 h-12 bg-purple-50 text-purple-500 rounded-full flex items-center justify-center mb-4 text-xl">ğŸ“</div>
                    <h3 class="font-bold text-slate-800 mb-2" data-i18n="prio_3_title">Junges Wohnen</h3>
                    <p class="text-xs text-slate-500" data-i18n="prio_3_desc">Bezahlbarer Raum fÃ¼r Familien.</p>
                </div>
            </div>
        </section>

        <!-- MÃ¤ngelmelder -->
        <section class="bg-white rounded-3xl p-8 shadow-sm border border-slate-200">
            <div class="flex items-center gap-3 mb-6">
                <span class="text-3xl">ğŸ“¸</span>
                <div>
                    <h2 class="text-2xl font-bold text-slate-800" data-i18n="report_title">MÃ¤ngelmelder</h2>
                    <p class="text-sm text-slate-500" data-i18n="report_desc">Schlagloch entdeckt? Laterne defekt? Direkt an den Bauhof melden.</p>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="lbl_category">Kategorie</label>
                            <select class="w-full p-3 rounded-lg bg-slate-50 border border-slate-200 focus:border-orange-500 focus:ring-0 outline-none">
                                <option data-i18n="opt_street">StraÃŸenschÃ¤den</option>
                                <option data-i18n="opt_light">Beleuchtung defekt</option>
                                <option data-i18n="opt_trash">MÃ¼ll / Sauberkeit</option>
                                <option data-i18n="opt_green">GrÃ¼nflÃ¤chenpflege</option>
                                <option data-i18n="opt_other">Sonstiges</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="lbl_loc">Standort</label>
                            <input type="text" placeholder="StraÃŸe oder Beschreibung" class="w-full p-3 rounded-lg bg-slate-50 border border-slate-200 focus:border-orange-500 outline-none">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1" data-i18n="lbl_desc">Beschreibung</label>
                        <textarea rows="3" placeholder="Details..." class="w-full p-3 rounded-lg bg-slate-50 border border-slate-200 focus:border-orange-500 outline-none"></textarea>
                    </div>
                    <button class="bg-orange-600 text-white font-bold py-3 px-6 rounded-lg w-full md:w-auto hover:bg-orange-700 transition-colors shadow-lg shadow-orange-200" data-i18n="btn_submit_report">Meldung absenden</button>
                </div>
                <div class="bg-slate-50 rounded-xl p-5 border border-slate-100">
                    <h4 class="text-sm font-bold text-slate-700 mb-4 border-b border-slate-200 pb-2" data-i18n="last_report">Ihre letzte Meldung:</h4>
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center flex-shrink-0 mt-1 text-xs">âœ”</div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">Laterne HauptstraÃŸe 4</div>
                            <div class="text-xs text-green-600 font-semibold mb-1" data-i18n="status_done">Erledigt (Repariert)</div>
                            <div class="text-xs text-slate-400" data-i18n="report_date">Gemeldet am 10.04. â€¢ Behoben am 12.04.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bau-Alarm & Handwerker -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <section class="bg-indigo-50 rounded-3xl p-6 border border-indigo-100">
                <div class="flex items-start justify-between mb-4">
                    <div>
                        <h3 class="text-xl font-bold text-indigo-900" data-i18n="alarm_title">Bau-Alarm: Nichts verpassen!</h3>
                        <p class="text-sm text-indigo-700/80 mt-1" data-i18n="alarm_desc">Nachricht erhalten, wenn im Umkreis von 200m Bauprojekte starten oder PlÃ¤ne geÃ¤ndert werden.</p>
                    </div>
                    <span class="text-3xl">ğŸ—ï¸</span>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm flex items-center gap-2">
                    <input type="email" placeholder="E-Mail" class="flex-grow p-2 outline-none text-sm text-slate-600">
                    <button class="text-xs font-bold bg-indigo-600 text-white px-3 py-2 rounded-lg hover:bg-indigo-700" data-i18n="btn_activate">Aktivieren</button>
                </div>
            </section>
            <section class="bg-white rounded-3xl p-6 border border-slate-200">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold text-slate-800" data-i18n="craft_title">ğŸ› ï¸ Handwerker in der NÃ¤he</h3>
                    <span class="text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded" data-i18n="radius">Radius: 10km</span>
                </div>
                <div class="relative mb-4">
                    <input type="text" placeholder="PLZ..." class="w-full bg-slate-50 border border-slate-200 rounded-lg py-2 pl-3 pr-10 text-sm focus:border-slate-400 outline-none">
                    <span class="absolute right-3 top-2 text-slate-400">ğŸ”</span>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition-colors cursor-pointer group">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 font-bold text-xs">EM</div>
                            <div>
                                <div class="font-bold text-slate-800 text-sm">Elektro MÃ¼ller GmbH</div>
                                <div class="flex gap-1 mt-1"><span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 rounded">Photovoltaik</span> <span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 rounded">Smart Home</span></div>
                            </div>
                        </div>
                        <button class="w-8 h-8 rounded-full bg-green-50 text-green-600 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">ğŸ“</button>
                    </div>
                    <div class="flex items-center justify-between p-3 border border-slate-100 rounded-xl hover:bg-slate-50 transition-colors cursor-pointer group">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 font-bold text-xs">DS</div>
                            <div>
                                <div class="font-bold text-slate-800 text-sm">Dachdeckerei Schmidt</div>
                                <div class="flex gap-1 mt-1"><span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 rounded" data-i18n="tag_insulation">DÃ¤mmung</span> <span class="text-[10px] bg-slate-100 text-slate-500 px-1.5 rounded" data-i18n="tag_renovation">Sanierung</span></div>
                            </div>
                        </div>
                        <button class="w-8 h-8 rounded-full bg-green-50 text-green-600 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">ğŸ“</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Objekt melden -->
        <section class="bg-slate-900 rounded-3xl p-8 text-white text-center">
            <h3 class="text-xl font-bold mb-2" data-i18n="empty_title">Leerstand melden?</h3>
            <p class="text-slate-400 text-sm mb-4 max-w-lg mx-auto" data-i18n="empty_desc">Kennen Sie ein weiteres leerstehendes Haus, das Potenzial hat? Helfen Sie uns.</p>
            <button class="bg-orange-600 text-white px-6 py-2 rounded-full font-bold hover:bg-orange-700 transition-colors" data-i18n="btn_empty_report">Zum Leerstandsmelder â†’</button>
        </section>
    </main>

    <footer class="bg-white border-t border-slate-200 text-slate-400 py-8 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center">
            <p class="mb-4 text-sm">&copy; 2024 Stadtentwicklung & BÃ¼rgerdialog</p>
            <div class="flex justify-center gap-4 text-xs">
                <a href="#" class="hover:text-slate-600" data-i18n="link_imprint">Impressum</a>
                <a href="#" class="hover:text-slate-600" data-i18n="link_privacy">Datenschutz</a>
                <a href="#" class="hover:text-slate-600" data-i18n="link_contact">Kontakt</a>
            </div>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) { tabcontent[i].style.display = "none"; }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) { tablinks[i].className = tablinks[i].className.replace(" active", ""); }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        // --- TRANSLATION DATABASE ---
        const translations = {
            "de": {
                "modal_title": "Willkommen im Quartier!", "modal_desc": "Damit wir Sie mit Ihrer Nachbarschaft verbinden kÃ¶nnen, benÃ¶tigen wir kurz Ihre Region.", "lbl_country": "Land", "lbl_zip": "Postleitzahl", "modal_error": "Diese PLZ liegt leider auÃŸerhalb unseres Pilotgebiets.", "btn_enter": "Zum Quartier", "nav_title": "Unser Quartier", "nav_subtitle": "Region wÃ¤hlen...", "nav_phase": "Phase: BÃ¼rger-Dialog", "hero_title_1": "Wie soll sich", "hero_title_city": "unsere Stadt", "hero_title_2": "entwickeln?", "hero_desc": "Leerstand vermeiden, Wohnraum schaffen, Charakter bewahren. Ihre Stimmung und Ihre PrioritÃ¤ten sind unser Kompass.", "badge_soon": "DemnÃ¤chst", "badge_avail": "VerfÃ¼gbar", "date_day": "So", "event_title": "Quartiersflohmarkt", "event_loc": "Marktplatz, 14:00 Uhr", "btn_calendar": "Kalender Ã¶ffnen", "rent_title": "Leih-Bar: Lastenrad \"E-Donkey\"", "rent_desc": "Kostenlos ausleihen fÃ¼r 24h.", "btn_reserve": "Jetzt reservieren", "baro_title": "Das Stimmungsbarometer", "baro_desc": "Wie bewerten Sie die aktuelle Entwicklung in Ihrer Nachbarschaft?", "mood_bad": "Besorgt", "mood_neutral": "Neutral", "mood_good": "Zuversichtlich", "vote_thanks": "Danke fÃ¼r Ihre Stimme!", "status_positive": "Positiv", "based_on": "Basierend auf", "votes": "Stimmen", "prio_title": "Worauf sollen wir uns fokussieren?", "prio_1_title": "Sanierung fÃ¶rdern", "prio_1_desc": "Altbauten erhalten statt neu bauen.", "prio_2_title": "Mehr GrÃ¼nflÃ¤chen", "prio_2_desc": "Versiegelte FlÃ¤chen entsiegeln.", "prio_3_title": "Junges Wohnen", "prio_3_desc": "Bezahlbarer Raum fÃ¼r Familien.", "report_title": "MÃ¤ngelmelder", "report_desc": "Schlagloch entdeckt? Laterne defekt? Direkt an den Bauhof melden.", "lbl_category": "Kategorie", "opt_street": "StraÃŸenschÃ¤den", "opt_light": "Beleuchtung defekt", "opt_trash": "MÃ¼ll / Sauberkeit", "opt_green": "GrÃ¼nflÃ¤chenpflege", "opt_other": "Sonstiges", "lbl_loc": "Standort", "lbl_desc": "Beschreibung", "btn_submit_report": "Meldung absenden", "last_report": "Ihre letzte Meldung:", "status_done": "Erledigt (Repariert)", "report_date": "Gemeldet am 10.04. â€¢ Behoben am 12.04.", "alarm_title": "Bau-Alarm: Nichts verpassen!", "alarm_desc": "Nachricht erhalten, wenn im Umkreis von 200m Bauprojekte starten oder PlÃ¤ne geÃ¤ndert werden.", "btn_activate": "Aktivieren", "craft_title": "ğŸ› ï¸ Handwerker in der NÃ¤he", "radius": "Radius: 10km", "tag_insulation": "DÃ¤mmung", "tag_renovation": "Sanierung", "empty_title": "Leerstand melden?", "empty_desc": "Kennen Sie ein weiteres leerstehendes Haus, das Potenzial hat? Helfen Sie uns.", "btn_empty_report": "Zum Leerstandsmelder â†’", "link_imprint": "Impressum", "link_privacy": "Datenschutz", "link_contact": "Kontakt"
            },
            "en": {
                "modal_title": "Welcome to the Neighborhood!", "modal_desc": "To connect you with your neighborhood, we briefly need your region.", "lbl_country": "Country", "lbl_zip": "Zip Code", "modal_error": "This zip code is unfortunately outside our pilot area.", "btn_enter": "Go to Neighborhood", "nav_title": "Our Neighborhood", "nav_subtitle": "Select region...", "nav_phase": "Phase: Citizen Dialogue", "hero_title_1": "How should", "hero_title_city": "our city", "hero_title_2": "develop?", "hero_desc": "Avoid vacancies, create living space, preserve character. Your mood and priorities are our compass.", "badge_soon": "Coming Soon", "badge_avail": "Available", "date_day": "Sun", "event_title": "Neighborhood Flea Market", "event_loc": "Market Square, 2:00 PM", "btn_calendar": "Open Calendar", "rent_title": "Rental Bar: Cargo Bike \"E-Donkey\"", "rent_desc": "Borrow for free for 24h.", "btn_reserve": "Reserve Now", "baro_title": "Community Sentiment", "baro_desc": "How do you rate the current development in your neighborhood?", "mood_bad": "Worried", "mood_neutral": "Neutral", "mood_good": "Confident", "vote_thanks": "Thanks for your vote!", "status_positive": "Positive", "based_on": "Based on", "votes": "votes", "prio_title": "What should we focus on?", "prio_1_title": "Promote Renovation", "prio_1_desc": "Preserve old buildings instead of building new ones.", "prio_2_title": "More Green Spaces", "prio_2_desc": "Unseal sealed surfaces.", "prio_3_title": "Young Living", "prio_3_desc": "Affordable space for families.", "report_title": "Defect Reporter", "report_desc": "Spotted a pothole? Broken street light? Report directly to the depot.", "lbl_category": "Category", "opt_street": "Road Damage", "opt_light": "Defective Lighting", "opt_trash": "Trash / Cleanliness", "opt_green": "Green Maintenance", "opt_other": "Other", "lbl_loc": "Location", "lbl_desc": "Description", "btn_submit_report": "Submit Report", "last_report": "Your last report:", "status_done": "Done (Repaired)", "report_date": "Reported on Apr 10 â€¢ Fixed on Apr 12", "alarm_title": "Construction Alarm: Don't miss out!", "alarm_desc": "Get notified when construction projects start or plans change within a 200m radius.", "btn_activate": "Activate", "craft_title": "ğŸ› ï¸ Craftsmen nearby", "radius": "Radius: 10km", "tag_insulation": "Insulation", "tag_renovation": "Renovation", "empty_title": "Report Vacancy?", "empty_desc": "Do you know another vacant house with potential? Help us.", "btn_empty_report": "Go to Vacancy Reporter â†’", "link_imprint": "Imprint", "link_privacy": "Privacy", "link_contact": "Contact"
            },
            "fr": {
                "modal_title": "Bienvenue dans le quartier !", "modal_desc": "Pour vous connecter Ã  votre voisinage, nous avons besoin de votre rÃ©gion.", "lbl_country": "Pays", "lbl_zip": "Code Postal", "modal_error": "Ce code postal est malheureusement hors de notre zone pilote.", "btn_enter": "AccÃ©der au quartier", "nav_title": "Notre Quartier", "nav_subtitle": "Choisir la rÃ©gion...", "nav_phase": "Phase : Dialogue Citoyen", "hero_title_1": "Comment", "hero_title_city": "notre ville", "hero_title_2": "doit-elle Ã©voluer ?", "hero_desc": "Ã‰viter les vacances, crÃ©er des logements, prÃ©server le caractÃ¨re. Votre humeur et vos prioritÃ©s sont notre boussole.", "badge_soon": "BientÃ´t", "badge_avail": "Disponible", "date_day": "Dim", "event_title": "Brocante de quartier", "event_loc": "Place du MarchÃ©, 14h00", "btn_calendar": "Ouvrir le calendrier", "rent_title": "Bar Ã  prÃªt : VÃ©lo cargo \"E-Donkey\"", "rent_desc": "Emprunter gratuitement pour 24h.", "btn_reserve": "RÃ©server maintenant", "baro_title": "BaromÃ¨tre d'ambiance", "baro_desc": "Comment Ã©valuez-vous le dÃ©veloppement actuel de votre quartier ?", "mood_bad": "Inquiet", "mood_neutral": "Neutre", "mood_good": "Confiant", "vote_thanks": "Merci pour votre vote !", "status_positive": "Positif", "based_on": "BasÃ© sur", "votes": "votes", "prio_title": "Sur quoi devons-nous nous concentrer ?", "prio_1_title": "Promouvoir la rÃ©novation", "prio_1_desc": "PrÃ©server l'ancien au lieu de construire du neuf.", "prio_2_title": "Plus d'espaces verts", "prio_2_desc": "DÃ©simpermÃ©abiliser les surfaces.", "prio_3_title": "Logement jeune", "prio_3_desc": "Espace abordable pour les familles.", "report_title": "Signalement de dÃ©fauts", "report_desc": "Nid de poule ? Lampadaire cassÃ© ? Signalez-le directement.", "lbl_category": "CatÃ©gorie", "opt_street": "DÃ©gÃ¢ts routiers", "opt_light": "Ã‰clairage dÃ©fectueux", "opt_trash": "DÃ©chets / PropretÃ©", "opt_green": "Entretien espaces verts", "opt_other": "Autre", "lbl_loc": "Emplacement", "lbl_desc": "Description", "btn_submit_report": "Envoyer le rapport", "last_report": "Votre dernier rapport :", "status_done": "TerminÃ© (RÃ©parÃ©)", "report_date": "SignalÃ© le 10 avr. â€¢ RÃ©parÃ© le 12 avr.", "alarm_title": "Alarme chantier : Ne manquez rien !", "alarm_desc": "Recevez une notification lorsque des projets de construction commencent dans un rayon de 200m.", "btn_activate": "Activer", "craft_title": "ğŸ› ï¸ Artisans Ã  proximitÃ©", "radius": "Rayon : 10km", "tag_insulation": "Isolation", "tag_renovation": "RÃ©novation", "empty_title": "Signaler une vacance ?", "empty_desc": "Connaissez-vous une autre maison vide avec du potentiel ? Aidez-nous.", "btn_empty_report": "Vers le signalement â†’", "link_imprint": "Mentions lÃ©gales", "link_privacy": "ConfidentialitÃ©", "link_contact": "Contact"
            }
        };

        // --- LANGUAGE & LOCATION LOGIC ---
        function changeLanguage(lang) {
            // 1. Save to LocalStorage
            localStorage.setItem('baukompass_lang', lang);
            
            // 2. Visual Update of Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if(btn.dataset.lang === lang) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // 3. Update Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if(translations[lang][key]) {
                    el.innerText = translations[lang][key];
                }
            });
        }

        const plzDatabase = {
            "DE": { "52062": "Aachen", "52064": "Aachen", "52066": "Aachen", "52068": "Aachen", "52070": "Aachen", "52072": "Aachen", "52074": "Aachen", "52076": "Aachen", "52078": "Aachen", "52080": "Aachen", "52477": "Alsdorf", "52499": "Baesweiler", "52249": "Eschweiler", "52134": "Herzogenrath", "52156": "Monschau", "52159": "Roetgen", "52152": "Simmerath", "52222": "Stolberg", "52223": "Stolberg", "52224": "Stolberg", "52146": "WÃ¼rselen", "52457": "Aldenhoven", "52459": "Inden", "52379": "Langerwehe", "52393": "HÃ¼rtgenwald", "52396": "Heimbach", "52385": "Nideggen", "52531": "Ãœbach-Palenberg", "52511": "Geilenkirchen", "53937": "Schleiden", "53940": "Hellenthal" },
            "BE": { "4720": "Kelmis", "4850": "PlombiÃ¨res", "4730": "Raeren", "4731": "Raeren-Eynatten", "4700": "Eupen", "4750": "BÃ¼tgenbach" },
            "NL": { "6291": "Vaals", "6369": "Simpelveld" }
        };

        function checkRangeNL(plz) {
            const p = parseInt(plz);
            if (p >= 6460 && p <= 6471) return "Kerkrade";
            if (p >= 6370 && p <= 6374) return "Landgraaf";
            if (p >= 6400 && p <= 6433) return "Heerlen";
            return null;
        }

        // EmpfÃ¤ngt die Nachricht vom iframe
        window.addEventListener('message', function(e) {
            if (e.data && e.data.type === 'resize-iframe') {
                const iframe = document.getElementById('seamless-tool');
                if (iframe) { iframe.style.height = e.data.height + 'px'; }
        function handleLocationSubmit(event) {
            event.preventDefault();
            const country = document.getElementById('country-select').value;
            const plz = document.getElementById('plz-input').value.trim();
            const errorBox = document.getElementById('location-error');
            const modal = document.getElementById('location-modal');
            const body = document.getElementById('main-body');
            
            let foundCity = null;
            if (plzDatabase[country] && plzDatabase[country][plz]) foundCity = plzDatabase[country][plz];
            else if (country === 'NL') foundCity = checkRangeNL(plz);

            if (foundCity) {
                document.getElementById('header-location').innerText = foundCity;
                document.getElementById('hero-city-name').innerText = foundCity;
                modal.classList.add('hidden');
                body.classList.remove('overflow-hidden');
            } else {
                errorBox.classList.remove('hidden');
                // Optional: translate error message dynamic based on currentLang if needed
            }
        }

        // --- CHART JS ---
        let chartInstance = null;
        let currentScore = 72;
        let voteCount = 1240;

        function initChart() {
            const ctx = document.getElementById('sentimentChart').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 400, 0);
            gradient.addColorStop(0, '#ef4444');   
            gradient.addColorStop(0.5, '#eab308'); 
            gradient.addColorStop(1, '#22c55e');   

            chartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Stimmung', 'Rest'],
                    datasets: [{
                        data: [currentScore, 100 - currentScore],
                        backgroundColor: [gradient, '#e2e8f0'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false, rotation: -90, circumference: 180, cutout: '75%',
                    plugins: { legend: { display: false }, tooltip: { enabled: false } },
                    animation: { animateScale: true, animateRotate: true }
                }
            });
        }

        function voteSentiment(type) {
            if (type === 0) currentScore = Math.max(0, currentScore - 5);
            if (type === 1) currentScore = Math.min(100, Math.max(0, currentScore + 1));
            if (type === 2) currentScore = Math.min(100, currentScore + 3);
            voteCount++;
            document.getElementById('vote-count').innerText = voteCount.toLocaleString();
            document.getElementById('sentiment-score').innerText = currentScore + '%';
            chartInstance.data.datasets[0].data = [currentScore, 100 - currentScore];
            chartInstance.update();
            const msg = document.getElementById('vote-msg');
            msg.style.opacity = '1';
            setTimeout(() => { msg.style.opacity = '0'; }, 2000);
        }

        function togglePrio(element) { element.classList.toggle('selected'); }

        // --- INIT ON LOAD ---
        window.addEventListener('load', () => {
            initChart();
            // Load saved language
            const savedLang = localStorage.getItem('baukompass_lang') || 'de';
            changeLanguage(savedLang);
        });

    </script>
</body>
