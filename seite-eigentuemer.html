!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F√ºr Eigent√ºmer:innen - BAUKOMPASS</title>
    <style>
        /* --- DESIGN-SYSTEM --- */
        :root {
            --bg-color: #f8f1d9;
            --text-color: #222;
            --accent-color: #2c3e50; /* Dunkelblau */
            --highlight-color: #27ae60; /* Gr√ºn f√ºr F√∂rderung */
            --alert-color: #e67e22; /* Orange f√ºr Alarme */
        }
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; }

        /* Navigation */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; background: white; border-bottom: 1px solid #e0e0e0; }
        .nav-links a { text-decoration: none; color: var(--text-color); font-weight: bold; font-size: 0.9rem; text-transform: uppercase; }
        .logo { font-weight: 900; font-size: 1.5rem; letter-spacing: 2px; text-transform: uppercase; text-decoration: none; color: black; }

        /* Language Switcher */
        .lang-switch { display: flex; gap: 10px; }
        .lang-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; opacity: 0.5; transition: opacity 0.2s; padding: 0; }
        .lang-btn:hover, .lang-btn.active { opacity: 1; transform: scale(1.1); }

        /* Layout */
        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        .header-section { text-align: center; margin-bottom: 50px; }
        .header-section h1 { font-size: 2.5rem; color: var(--accent-color); margin-bottom: 10px; }
        .header-section p { font-size: 1.2rem; color: #555; }

        /* Grid & Cards */
        .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 30px; margin-bottom: 40px; }
        .service-card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-top: 5px solid var(--accent-color); transition: transform 0.2s; }
        .service-card:hover { transform: translateY(-3px); }
        .service-card h3 { margin-top: 0; color: var(--accent-color); display: flex; align-items: center; gap: 10px; }

        /* Specific Elements (Funding, Energy, etc.) */
        .funding-item { background: #f4f9f4; border: 1px solid #c8e6c9; padding: 15px; border-radius: 8px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .funding-badge { background: var(--highlight-color); color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .btn-fund { background: white; border: 1px solid var(--highlight-color); color: var(--highlight-color); padding: 5px 10px; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-fund:hover { background: var(--highlight-color); color: white; }
        
        .craftsman-search { display: flex; gap: 10px; margin-bottom: 20px; }
        .craftsman-list { list-style: none; padding: 0; }
        .craftsman-li { padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
        .craftsman-tag { background: #eee; color: #555; font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; }

        .energy-box { background: linear-gradient(135deg, #2c3e50, #34495e); color: white; padding: 30px; border-radius: 12px; margin-bottom: 40px; text-align: center; }
        .energy-box h3 { color: white; justify-content: center; }
        .energy-meter { height: 20px; background: rgba(255,255,255,0.2); border-radius: 10px; margin: 20px auto; max-width: 600px; position: relative; overflow: hidden; }
        .energy-fill { height: 100%; background: linear-gradient(90deg, #e74c3c, #f1c40f, #2ecc71); width: 40%; transition: width 1s ease; }
        .energy-btn { background: #2ecc71; color: white; border: none; padding: 10px 20px; font-size: 1rem; border-radius: 5px; cursor: pointer; font-weight: bold; }

        .alert-section { background: white; padding: 40px; border-radius: 12px; text-align: center; border: 2px dashed var(--alert-color); max-width: 700px; margin: 0 auto 60px; }
        .input-group { display: flex; gap: 10px; max-width: 500px; margin: 20px auto; }
        input, select { padding: 0 12px; border: 1px solid #ccc; border-radius: 4px; width: 100%; height: 48px; box-sizing: border-box; vertical-align: middle; }
        button { box-sizing: border-box; }
        .btn-alert { background: var(--alert-color); color: white; border: none; padding: 0 25px; height: 48px; border-radius: 4px; cursor: pointer; font-weight: bold; white-space: nowrap; }
        
        .vacancy-form label { display: block; margin-top: 10px; font-weight: bold; font-size: 0.9rem; }
        .btn-submit { background: var(--accent-color); color: white; width: 100%; padding: 12px; height: auto; border: none; border-radius: 4px; margin-top: 20px; cursor: pointer; font-weight: bold; }

        .kpi-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; background: #f0f7f4; padding: 15px; border-radius: 8px; margin: 20px 0; border: 1px solid #dcdcdc; }
        .kpi-item { text-align: center; }
        .kpi-value { display: block; font-weight: 800; font-size: 1.1rem; color: #2c3e50; }
        .kpi-label { font-size: 0.75rem; color: #666; text-transform: uppercase; letter-spacing: 0.5px; }

        .comment-section { border-top: 1px solid #eee; margin-top: 20px; padding-top: 15px; }
        .comment-list { list-style: none; padding: 0; margin-bottom: 15px; }
        .comment-bubble { background: #f9f9f9; padding: 10px; border-radius: 8px; margin-bottom: 8px; font-size: 0.9rem; border-left: 3px solid #ccc; }
        .comment-author { font-weight: bold; font-size: 0.8rem; color: #555; display: block; margin-bottom: 2px;}
        .comment-form { display: flex; gap: 10px; }
        .comment-input { flex-grow: 1; border: 1px solid #ccc; border-radius: 4px; font-size: 0.9rem; }
        .btn-comment { background: #7f8c8d; color: white; border: none; padding: 0 15px; height: 48px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; }
        .btn-comment:hover { background: #2c3e50; }

        /* Modal Styles */
        #location-modal { transition: opacity 0.3s ease-in-out; position: fixed; inset: 0; z-index: 100; background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; padding: 1rem; }
        #location-modal.hidden { opacity: 0; pointer-events: none; }
        .modal-content { background: white; border-radius: 16px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); max-width: 28rem; width: 100%; padding: 2rem; border-top: 4px solid var(--alert-color); position: relative; }
        .hidden { display: none !important; }

        /* Mobile */
        @media (max-width: 768px) {
            .nav-links a { font-size: 0.7rem !important; }
            .logo { font-size: 1.2rem; }
            nav { padding: 15px 20px; }
            .grid-2, .legal-grid, .kpi-grid { grid-template-columns: 1fr !important; }
            .container { padding: 0 15px; margin-top: 20px; }
            .service-card, .energy-box, .alert-section { padding: 20px !important; }
            .header-section h1 { font-size: 1.8rem; }
            .input-group { flex-direction: column; }
            .input-group input, .input-group button { width: 100% !important; margin-bottom: 10px; }
            .energy-form > div { grid-template-columns: 1fr !important; }
            .service-card > div[style*="height: 200px"] { height: 150px !important; }
        }
    </style>
</head>
<body id="main-body" style="overflow: hidden;">

    <!-- LOCATION MODAL -->
    <div id="location-modal">
        <div class="modal-content">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <span style="font-size: 2.5rem; display: block; margin-bottom: 0.5rem;">üåç</span>
                <h2 style="font-size: 1.5rem; font-weight: bold; color: var(--accent-color); margin: 0;" data-i18n="modal_title">Willkommen!</h2>
                <p style="color: #666; font-size: 0.875rem; margin-top: 0.5rem;" data-i18n="modal_desc">Bitte w√§hlen Sie Ihre Region f√ºr lokale F√∂rderprogramme.</p>
            </div>
            <form id="location-form" onsubmit="handleLocationSubmit(event)" style="display: flex; flex-direction: column; gap: 1rem;">
                <div>
                    <label style="display: block; font-size: 0.75rem; font-weight: bold; color: #666; text-transform: uppercase; margin-bottom: 0.25rem;" data-i18n="lbl_country">Land</label>
                    <select id="country-select" style="width: 100%; padding: 0.75rem; border-radius: 0.5rem; border: 1px solid #ccc;">
                        <option value="DE">Deutschland üá©üá™</option>
                        <option value="BE">Belgien üáßüá™</option>
                        <option value="NL">Niederlande üá≥üá±</option>
                    </select>
                </div>
                <div>
                    <label style="display: block; font-size: 0.75rem; font-weight: bold; color: #666; text-transform: uppercase; margin-bottom: 0.25rem;" data-i18n="lbl_zip">Postleitzahl</label>
                    <input id="plz-input" type="text" placeholder="z.B. 52152" required style="width: 100%; padding: 0.75rem; border-radius: 0.5rem; border: 1px solid #ccc;">
                </div>
                <div id="location-error" class="hidden" style="color: #ef4444; font-size: 0.75rem; text-align: center; background: #fef2f2; padding: 0.5rem; border-radius: 0.25rem;" data-i18n="modal_error">
                    Diese PLZ liegt leider au√üerhalb unseres Pilotgebiets.
                </div>
                <button type="submit" style="width: 100%; background: var(--alert-color); color: white; font-weight: bold; padding: 0.75rem; border-radius: 0.5rem; border: none; cursor: pointer; transition: transform 0.1s;" data-i18n="btn_enter">
                    Zum Bereich
                </button>
            </form>
        </div>
    </div>

    <nav>
        <div class="nav-links">
            <a href="index.html" data-i18n="nav_back">&larr; ZUR√úCK ZUR √úBERSICHT</a>
        </div>
        <a href="index.html" class="logo">BAUKOMPASS</a>
        <div class="lang-switch">
            <button onclick="changeLanguage('de')" class="lang-btn active" data-lang="de">üá©üá™</button>
            <button onclick="changeLanguage('en')" class="lang-btn" data-lang="en">üá¨üáß</button>
            <button onclick="changeLanguage('fr')" class="lang-btn" data-lang="fr">üá´üá∑</button>
        </div>
    </nav>

    <header class="header-section">
        <h1 data-i18n="header_title">Werte erhalten, Zukunft sichern</h1>
        <p><span data-i18n="header_sub">Ihr zentrales Portal f√ºr Sanierung und F√∂rderung</span> <span id="header-location-display" style="font-weight: bold; color: var(--alert-color);"></span></p>
    </header>

    <div class="container">

        <section class="energy-box">
            <h3 data-i18n="calc_title">üå± Sanierungs-Rechner</h3>
            <p data-i18n="calc_desc">Geben Sie Ihre Geb√§udedaten ein, um das individuelle Wertsteigerungspotenzial zu ermitteln.</p>
            
            <div class="energy-form" style="text-align: left; max-width: 600px; margin: 25px auto; background: rgba(255,255,255,0.1); padding: 25px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; align-items: end;">
                    <div>
                        <label style="display:block; margin-bottom:5px; font-size:0.85rem; color:#ddd;" data-i18n="lbl_year">Baujahr</label>
                        <input type="number" id="inp-year" placeholder="z.B. 1975" style="background:white; color:#333; margin-bottom:0;">
                    </div>
                    <div>
                        <label style="display:block; margin-bottom:5px; font-size:0.85rem; color:#ddd;" data-i18n="lbl_type">Geb√§udetyp</label>
                        <select id="inp-type" style="background:white; color:#333; margin-bottom:0;">
                            <option data-i18n="opt_house">Einfamilienhaus</option>
                            <option data-i18n="opt_row">Reihenhaus</option>
                            <option data-i18n="opt_multi">Mehrfamilienhaus</option>
                            <option data-i18n="opt_timber">Fachwerkhaus</option>
                        </select>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <label style="display:block; margin-bottom:5px; font-size:0.85rem; color:#ddd;" data-i18n="lbl_insulation">Aktueller D√§mm-Standard</label>
                    <select id="inp-insulation" style="background:white; color:#333;">
                        <option value="none" data-i18n="opt_ins_none">Unbekannt / Keine D√§mmung</option>
                        <option value="old" data-i18n="opt_ins_old">Altbestand (vor 1995)</option>
                        <option value="partial" data-i18n="opt_ins_partial">Teilged√§mmt (z.B. nur Dach)</option>
                        <option value="good" data-i18n="opt_ins_good">Gut (nach 2005)</option>
                    </select>
                </div>
                <button class="energy-btn" style="width:100%; margin-top:20px;" onclick="calculateRenovation()" data-i18n="btn_analyze">Analyse starten</button>
            </div>

            <div id="simulation-result" style="display:none; margin-top:30px; border-top:1px solid rgba(255,255,255,0.3); padding-top:20px; animation: fadeEffect 1s;">
                <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;"><span data-i18n="res_prefix">Ergebnis f√ºr Ihr</span> <span id="res-type">Haus</span> (Bj. <span id="res-year"></span>):</p>
                <div class="energy-meter">
                    <div class="energy-fill" id="energy-bar" style="width: 20%; background: #e74c3c;"></div>
                </div>
                <p id="energy-text" style="font-size: 1.1rem; margin-bottom: 5px; font-weight: bold;">Energieklasse H</p>
                <p id="value-text" style="color: #2ecc71; font-weight: 800; font-size: 1.4rem; margin-top: 10px;"></p>
                <p style="font-size: 0.8rem; margin-top: 5px; opacity: 0.7;" data-i18n="res_disclaimer">*Basierend auf regionalen Durchschnittswerten.</p>
            </div>
        </section>

        <div class="grid-2">
            <div class="service-card" style="border-top-color: var(--highlight-color);">
                <h3 data-i18n="fund_title">üí∞ Verf√ºgbare F√∂rdergelder</h3>
                <p style="font-size:0.9rem; margin-bottom:20px;" data-i18n="fund_desc">Aktuelle Programme f√ºr Ihre Region:</p>
                <div class="funding-item">
                    <div><strong>KfW 261 (Wohngeb√§ude)</strong><br><span class="funding-badge" data-i18n="fund_badge_1">Bis zu 45% Zuschuss</span></div>
                    <button class="btn-fund" onclick="alert('Sie werden zum KfW-Portal weitergeleitet...')" data-i18n="btn_info">Info</button>
                </div>
                <div class="funding-item">
                    <div><strong>BAFA Heizungstausch</strong><br><span class="funding-badge" data-i18n="fund_badge_2">Bis zu 70% F√∂rderung</span></div>
                    <button class="btn-fund" onclick="alert('Antragsassistent wird gestartet...')" data-i18n="btn_help">Hilfe</button>
                </div>
                <div class="funding-item">
                    <div><strong data-i18n="fund_local_title">Kommunales Fassadenprogramm</strong><br><span class="funding-badge" data-i18n="fund_badge_3">Zuschuss: 5.000‚Ç¨</span></div>
                    <button class="btn-fund" onclick="alert('Formular wird heruntergeladen...')" data-i18n="btn_apply">Antrag</button>
                </div>
            </div>

            <div class="service-card">
                <h3 data-i18n="craft_title">üõ†Ô∏è Handwerker in der N√§he</h3>
                <p style="font-size:0.9rem; margin-bottom:20px;" data-i18n="craft_desc">Finden Sie verf√ºgbare Experten im Umkreis von 10km.</p>
                <div class="craftsman-search">
                    <input type="text" placeholder="PLZ oder Gewerk (z.B. Dachdecker)" data-i18n="craft_placeholder">
                    <button style="background:#ddd; border:none; padding:0 15px; border-radius:4px;">üîç</button>
                </div>
                <ul class="craftsman-list">
                    <li class="craftsman-li">
                        <div><strong>Elektro M√ºller GmbH</strong><br><span class="craftsman-tag">Photovoltaik</span> <span class="craftsman-tag">Smart Home</span></div>
                        <a href="#" style="color:var(--accent-color); font-weight:bold;" data-i18n="link_call">Anrufen</a>
                    </li>
                    <li class="craftsman-li">
                        <div><strong>Dachdeckerei Schmidt</strong><br><span class="craftsman-tag" data-i18n="tag_insulation">D√§mmung</span> <span class="craftsman-tag" data-i18n="tag_renovation">Sanierung</span></div>
                        <a href="#" style="color:var(--accent-color); font-weight:bold;" data-i18n="link_call">Anrufen</a>
                    </li>
                </ul>
                <p style="text-align:center; font-size:0.8rem; color:#888; margin-top:10px;" data-i18n="craft_footer">Gepr√ºfte Partner der Kommune</p>
            </div>

            <div class="service-card">
                <h3 data-i18n="vacancy_title">üèöÔ∏è Leerstand & Umnutzung</h3>
                <p style="font-size:0.9rem; margin-bottom:20px;" data-i18n="vacancy_desc">Haben Sie eine ungenutzte Immobilie? Melden Sie sie freiwillig f√ºr F√∂rder-Programme.</p>
                <form class="vacancy-form" onsubmit="event.preventDefault(); alert('Vielen Dank!');">
                    <label data-i18n="lbl_prop_type">Art der Immobilie</label>
                    <select><option data-i18n="opt_vacant_home">Wohnhaus</option><option data-i18n="opt_commercial">Gewerbe</option></select>
                    <button type="submit" class="btn-submit" data-i18n="btn_submit_confidential">Vertraulich absenden</button>
                </form>
            </div>

            <div class="service-card" style="background: #fdfdfd;">
                <h3 data-i18n="coop_title">ü§ù Kooperation mit der Kommune</h3>
                <p data-i18n="coop_desc">Wir unterst√ºtzen Sie nicht nur finanziell, sondern auch planerisch.</p>
                <ul style="padding-left:20px; color:#555;">
                    <li style="margin-bottom:10px;" data-i18n="coop_li_1">Kostenlose Erstberatung durch Stadtarchitekten</li>
                    <li style="margin-bottom:10px;" data-i18n="coop_li_2">Hilfe bei Bauantr√§gen & Genehmigungen</li>
                    <li style="margin-bottom:10px;" data-i18n="coop_li_3">Vermittlung an Investoren oder Baugruppen</li>
                </ul>
                <button class="btn-submit" style="background-color: #2c3e50; margin-top:10px;" onclick="alert('Terminbuchungssystem √∂ffnet sich...')" data-i18n="btn_book">Beratungstermin buchen</button>
            </div>
        </div>

        <h2 style="text-align: center; margin-bottom: 30px;" data-i18n="legal_title">Rechtssicher Eigentum halten</h2>
        <section class="service-card" style="border-top-color: #c0392b; margin-bottom: 60px;">
            <h3 data-i18n="rights_title">‚öñÔ∏è Rechte, Pflichten & Fristen</h3>
            <p style="margin-bottom: 20px;" data-i18n="rights_desc">Vermeiden Sie Bu√ügelder und Haftungsrisiken. Hier sind die wichtigsten Punkte, die Sie als Eigent√ºmer beachten m√ºssen.</p>
            <div class="legal-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <details style="background: #fff5f5; padding: 15px; border-radius: 8px; cursor: pointer;">
                    <summary style="font-weight: bold; color: #c0392b;" data-i18n="duty_safe_title">Verkehrssicherungspflicht</summary>
                    <p style="font-size: 0.9rem; margin-top: 10px;" data-i18n="duty_safe_desc">Sie haften f√ºr Sch√§den durch Glatteis oder herabfallende Ziegel. <br><strong>Pflicht:</strong> R√§um- und Streupflicht (7-20 Uhr), Baumkontrolle.</p>
                </details>
                <details style="background: #fff5f5; padding: 15px; border-radius: 8px; cursor: pointer;">
                    <summary style="font-weight: bold; color: #c0392b;" data-i18n="duty_energy_title">Energetische Nachr√ºstpflichten (GEG)</summary>
                    <p style="font-size: 0.9rem; margin-top: 10px;" data-i18n="duty_energy_desc">Bei Eigent√ºmerwechsel greifen oft Pflichten binnen 2 Jahren. <br><strong>Pflicht:</strong> D√§mmung oberste Geschossdecke, Austausch 30+ Jahre alter Standardkessel.</p>
                </details>
                <details style="background: #fff5f5; padding: 15px; border-radius: 8px; cursor: pointer;">
                    <summary style="font-weight: bold; color: #c0392b;" data-i18n="duty_clean_title">Stra√üenreinigung & R√ºckschnitt</summary>
                    <p style="font-size: 0.9rem; margin-top: 10px;" data-i18n="duty_clean_desc">Pflanzen d√ºrfen nicht in den Gehweg ragen. Gehwege sind oft vom Anlieger zu reinigen. <br><strong>Pflicht:</strong> R√ºckschnitt bis Grundst√ºcksgrenze, Kehrpflicht.</p>
                </details>
            </div>
            <p style="font-size: 0.8rem; color: #888; margin-top: 20px; text-align: center;" data-i18n="legal_disclaimer">Keine Rechtsberatung. Bitte pr√ºfen Sie die lokale Ortssatzung.</p>
        </section>

        <h2 style="text-align: center; margin-bottom: 30px;" data-i18n="practice_title">Better Practice: Von Nachbarn lernen</h2>
        <section class="grid-2">
            <div class="service-card" style="padding: 0; overflow: hidden; border: none; display: flex; flex-direction: column;">
                <div style="height: 200px; background: #2c3e50; display: flex; align-items: center; justify-content: center; color: white; position: relative;">
                    <span style="font-size: 3rem;">üèöÔ∏è ‚ûî üè°</span>
                    <span style="position: absolute; top: 10px; right: 10px; background: #27ae60; color: white; padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; font-weight: bold;" data-i18n="badge_done">Abgeschlossen 2024</span>
                </div>
                <div style="padding: 25px; display: flex; flex-direction: column; flex-grow: 1;">
                    <h3 style="margin-top: 0;" data-i18n="ex_1_title">Scheune zu Loft-Wohnen</h3>
                    <p style="color: #555; font-size: 0.9rem;" data-i18n="ex_1_desc">"Die alte Scheune stand 10 Jahre leer. Durch die Umnutzung entstanden zwei moderne Mietwohnungen."</p>
                    <div class="kpi-grid">
                        <div class="kpi-item"><span class="kpi-value">340 T‚Ç¨</span><span class="kpi-label" data-i18n="kpi_cost">Gesamtkosten</span></div>
                        <div class="kpi-item"><span class="kpi-value" style="color: #27ae60;">85 T‚Ç¨</span><span class="kpi-label" data-i18n="kpi_fund">F√∂rderanteil</span></div>
                        <div class="kpi-item"><span class="kpi-value">12 J.</span><span class="kpi-label" data-i18n="kpi_amort">Amortisation</span></div>
                    </div>
                    <div class="comment-section">
                        <p style="font-size: 0.85rem; font-weight: bold; margin-bottom: 10px;" data-i18n="comments_title">Fragen & Kommentare:</p>
                        <ul class="comment-list" id="comments-1">
                            <li class="comment-bubble"><span class="comment-author">Markus B.</span> <span data-i18n="comment_1">Gibt es Probleme mit dem Denkmalschutz bei den gro√üen Fenstern?</span></li>
                        </ul>
                        <div class="comment-form">
                            <input type="text" id="input-1" class="comment-input" placeholder="Frage stellen..." data-i18n="placeholder_ask">
                            <button class="btn-comment" onclick="addComment('1')" data-i18n="btn_send">Senden</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="service-card" style="padding: 0; overflow: hidden; border: none; display: flex; flex-direction: column;">
                <div style="height: 200px; background: #34495e; display: flex; align-items: center; justify-content: center; color: white; position: relative;">
                    <span style="font-size: 3rem;">üìâ ‚ö°</span>
                    <span style="position: absolute; top: 10px; right: 10px; background: #27ae60; color: white; padding: 4px 8px; font-size: 0.8rem; border-radius: 4px; font-weight: bold;" data-i18n="badge_ongoing">Laufend</span>
                </div>
                <div style="padding: 25px; display: flex; flex-direction: column; flex-grow: 1;">
                    <h3 style="margin-top: 0;" data-i18n="ex_2_title">Energetische Kernsanierung</h3>
                    <p style="color: #555; font-size: 0.9rem;" data-i18n="ex_2_desc">"Baujahr 1970. Durch W√§rmepumpe und D√§mmung haben wir die Nebenkosten um 70% gesenkt."</p>
                    <div class="kpi-grid">
                        <div class="kpi-item"><span class="kpi-value">120 T‚Ç¨</span><span class="kpi-label" data-i18n="kpi_invest">Investition</span></div>
                        <div class="kpi-item"><span class="kpi-value" style="color: #27ae60;">45 %</span><span class="kpi-label" data-i18n="kpi_quota">F√∂rderquote</span></div>
                        <div class="kpi-item"><span class="kpi-value">9 J.</span><span class="kpi-label" data-i18n="kpi_rent">Rentabilit√§t</span></div>
                    </div>
                    <div class="comment-section">
                        <p style="font-size: 0.85rem; font-weight: bold; margin-bottom: 10px;" data-i18n="comments_title">Fragen & Kommentare:</p>
                        <ul class="comment-list" id="comments-2">
                            <li class="comment-bubble"><span class="comment-author">Familie K.</span> <span data-i18n="comment_2">Welchen Energieberater hatten Sie? Wir suchen auch noch.</span></li>
                        </ul>
                        <div class="comment-form">
                            <input type="text" id="input-2" class="comment-input" placeholder="Frage stellen..." data-i18n="placeholder_ask">
                            <button class="btn-comment" onclick="addComment('2')" data-i18n="btn_send">Senden</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="alert-section">
            <h3 style="color: var(--alert-color);" data-i18n="alarm_title">üîî Bau-Alarm: Nichts verpassen!</h3>
            <p data-i18n="alarm_desc">Werden Sie benachrichtigt, wenn in Ihrem direkten Umfeld (Radius 200m) neue Bauprojekte in die Offenlage gehen oder Bebauungspl√§ne ge√§ndert werden.</p>
            <div class="input-group">
                <input type="text" placeholder="Ihre Adresse" data-i18n="ph_address">
                <input type="email" placeholder="Ihre E-Mail" data-i18n="ph_email">
                <button class="btn-alert" onclick="alert('Adresse gespeichert!')" data-i18n="btn_activate">Aktivieren</button>
            </div>
        </section>

    </div>

    <script>
        // --- TRANSLATION LOGIC ---
        const translations = {
            "de": {
                "nav_back": "‚Üê ZUR√úCK ZUR √úBERSICHT", "header_title": "Werte erhalten, Zukunft sichern", "header_sub": "Ihr zentrales Portal f√ºr Sanierung, F√∂rderung und Entwicklung Ihrer Immobilie.", "calc_title": "üå± Sanierungs-Rechner", "calc_desc": "Geben Sie Ihre Geb√§udedaten ein, um das individuelle Wertsteigerungspotenzial zu ermitteln.", "lbl_year": "Baujahr", "lbl_type": "Geb√§udetyp", "opt_house": "Einfamilienhaus", "opt_row": "Reihenhaus", "opt_multi": "Mehrfamilienhaus", "opt_timber": "Fachwerkhaus", "lbl_insulation": "Aktueller D√§mm-Standard", "opt_ins_none": "Unbekannt / Keine D√§mmung", "opt_ins_old": "Altbestand (vor 1995)", "opt_ins_partial": "Teilged√§mmt (z.B. nur Dach)", "opt_ins_good": "Gut (nach 2005)", "btn_analyze": "Analyse starten", "res_prefix": "Ergebnis f√ºr Ihr", "res_disclaimer": "*Basierend auf regionalen Durchschnittswerten.", "fund_title": "üí∞ Verf√ºgbare F√∂rdergelder", "fund_desc": "Aktuelle Programme f√ºr Ihre Region:", "fund_badge_1": "Bis zu 45% Zuschuss", "btn_info": "Info", "fund_badge_2": "Bis zu 70% F√∂rderung", "btn_help": "Hilfe", "fund_local_title": "Kommunales Fassadenprogramm", "fund_badge_3": "Zuschuss: 5.000‚Ç¨", "btn_apply": "Antrag", "craft_title": "üõ†Ô∏è Handwerker in der N√§he", "craft_desc": "Finden Sie verf√ºgbare Experten im Umkreis von 10km.", "craft_placeholder": "PLZ oder Gewerk (z.B. Dachdecker)", "link_call": "Anrufen", "tag_insulation": "D√§mmung", "tag_renovation": "Sanierung", "craft_footer": "Gepr√ºfte Partner der Kommune", "vacancy_title": "üèöÔ∏è Leerstand & Umnutzung", "vacancy_desc": "Haben Sie eine ungenutzte Immobilie? Melden Sie sie freiwillig f√ºr F√∂rder-Programme.", "lbl_prop_type": "Art der Immobilie", "opt_vacant_home": "Wohnhaus", "opt_commercial": "Gewerbe", "btn_submit_confidential": "Vertraulich absenden", "coop_title": "ü§ù Kooperation mit der Kommune", "coop_desc": "Wir unterst√ºtzen Sie nicht nur finanziell, sondern auch planerisch.", "coop_li_1": "Kostenlose Erstberatung durch Stadtarchitekten", "coop_li_2": "Hilfe bei Bauantr√§gen & Genehmigungen", "coop_li_3": "Vermittlung an Investoren oder Baugruppen", "btn_book": "Beratungstermin buchen", "legal_title": "Rechtssicher Eigentum halten", "rights_title": "‚öñÔ∏è Rechte, Pflichten & Fristen", "rights_desc": "Vermeiden Sie Bu√ügelder und Haftungsrisiken. Hier sind die wichtigsten Punkte, die Sie als Eigent√ºmer beachten m√ºssen.", "duty_safe_title": "Verkehrssicherungspflicht", "duty_safe_desc": "Sie haften f√ºr Sch√§den durch Glatteis oder herabfallende Ziegel. <br><strong>Pflicht:</strong> R√§um- und Streupflicht (7-20 Uhr), Baumkontrolle.", "duty_energy_title": "Energetische Nachr√ºstpflichten (GEG)", "duty_energy_desc": "Bei Eigent√ºmerwechsel greifen oft Pflichten binnen 2 Jahren. <br><strong>Pflicht:</strong> D√§mmung oberste Geschossdecke, Austausch 30+ Jahre alter Standardkessel.", "duty_clean_title": "Stra√üenreinigung & R√ºckschnitt", "duty_clean_desc": "Pflanzen d√ºrfen nicht in den Gehweg ragen. Gehwege sind oft vom Anlieger zu reinigen. <br><strong>Pflicht:</strong> R√ºckschnitt bis Grundst√ºcksgrenze, Kehrpflicht.", "legal_disclaimer": "Keine Rechtsberatung. Bitte pr√ºfen Sie die lokale Ortssatzung.", "practice_title": "Better Practice: Von Nachbarn lernen", "badge_done": "Abgeschlossen 2024", "ex_1_title": "Scheune zu Loft-Wohnen", "ex_1_desc": "\"Die alte Scheune stand 10 Jahre leer. Durch die Umnutzung entstanden zwei moderne Mietwohnungen.\"", "kpi_cost": "Gesamtkosten", "kpi_fund": "F√∂rderanteil", "kpi_amort": "Amortisation", "comments_title": "Fragen & Kommentare:", "comment_1": "Gibt es Probleme mit dem Denkmalschutz bei den gro√üen Fenstern?", "placeholder_ask": "Frage stellen...", "btn_send": "Senden", "badge_ongoing": "Laufend", "ex_2_title": "Energetische Kernsanierung", "ex_2_desc": "\"Baujahr 1970. Durch W√§rmepumpe und D√§mmung haben wir die Nebenkosten um 70% gesenkt.\"", "kpi_invest": "Investition", "kpi_quota": "F√∂rderquote", "kpi_rent": "Rentabilit√§t", "comment_2": "Welchen Energieberater hatten Sie? Wir suchen auch noch.", "alarm_title": "üîî Bau-Alarm: Nichts verpassen!", "alarm_desc": "Werden Sie benachrichtigt, wenn in Ihrem direkten Umfeld (Radius 200m) neue Bauprojekte in die Offenlage gehen.", "ph_address": "Ihre Adresse (Stra√üe, Nr, PLZ)", "ph_email": "Ihre E-Mail", "btn_activate": "Aktivieren", "alarm_footer": "Kostenlos & jederzeit k√ºndbar.",
                "modal_title": "Willkommen!", "modal_desc": "Bitte w√§hlen Sie Ihre Region f√ºr lokale F√∂rderprogramme.", "lbl_country": "Land", "lbl_zip": "Postleitzahl", "modal_error": "Diese PLZ liegt leider au√üerhalb unseres Pilotgebiets.", "btn_enter": "Zum Bereich",
                "lbl_address": "Adresse des Objekts", "lbl_interest": "Interesse an:", "opt_sale": "Verkauf / Sanierung", "opt_interim": "Zwischennutzung", "opt_consult": "Beratung durch die Gemeinde"
            },
            "en": {
                "nav_back": "‚Üê BACK TO OVERVIEW", "header_title": "Preserve Value, Secure Future", "header_sub": "Your central portal for renovation, funding, and development of your property.", "calc_title": "üå± Renovation Calculator", "calc_desc": "Enter your building data to determine the individual potential for value increase.", "lbl_year": "Year of Construction", "lbl_type": "Building Type", "opt_house": "Single Family House", "opt_row": "Terraced House", "opt_multi": "Multi-Family House", "opt_timber": "Timber-Framed House", "lbl_insulation": "Current Insulation Standard", "opt_ins_none": "Unknown / No Insulation", "opt_ins_old": "Old Stock (pre 1995)", "opt_ins_partial": "Partially Insulated (e.g., roof only)", "opt_ins_good": "Good (post 2005)", "btn_analyze": "Start Analysis", "res_prefix": "Result for your", "res_disclaimer": "*Based on regional averages.", "fund_title": "üí∞ Available Funding", "fund_desc": "Current programs for your region:", "fund_badge_1": "Up to 45% Subsidy", "btn_info": "Info", "fund_badge_2": "Up to 70% Funding", "btn_help": "Help", "fund_local_title": "Municipal Facade Program", "fund_badge_3": "Subsidy: ‚Ç¨5,000", "btn_apply": "Apply", "craft_title": "üõ†Ô∏è Craftsmen Nearby", "craft_desc": "Find available experts within a 10km radius.", "craft_placeholder": "Zip code or trade (e.g. roofer)", "link_call": "Call", "tag_insulation": "Insulation", "tag_renovation": "Renovation", "craft_footer": "Verified Municipal Partners", "vacancy_title": "üèöÔ∏è Vacancy & Conversion", "vacancy_desc": "Do you have an unused property? Report it voluntarily for funding programs regarding reactivation or interim use.", "lbl_prop_type": "Property Type", "opt_vacant_home": "Residential House", "opt_commercial": "Commercial", "btn_submit_confidential": "Submit Confidentially", "coop_title": "ü§ù Cooperation with the Municipality", "coop_desc": "We support you not only financially but also with planning.", "coop_li_1": "Free initial consultation by city architects", "coop_li_2": "Help with building applications & permits", "coop_li_3": "Mediation to investors or building groups", "btn_book": "Book Consultation", "legal_title": "Holding Property Legally Secure", "rights_title": "‚öñÔ∏è Rights, Duties & Deadlines", "rights_desc": "Avoid fines and liability risks. Here are the most important points you need to consider as an owner.", "duty_safe_title": "Traffic Safety Duty", "duty_safe_desc": "You are liable for damage caused by black ice or falling tiles. <br><strong>Duty:</strong> Clearing and gritting (7 AM - 8 PM), tree inspection.", "duty_energy_title": "Energy Retrofitting Duties (GEG)", "duty_energy_desc": "Duties often apply within 2 years of a change of ownership. <br><strong>Duty:</strong> Insulation of top floor ceiling, replacement of 30+ year old standard boilers.", "duty_clean_title": "Street Cleaning & Pruning", "duty_clean_desc": "Plants must not protrude onto the sidewalk. Sidewalks often have to be cleaned by residents. <br><strong>Duty:</strong> Pruning to property line, sweeping duty.", "legal_disclaimer": "No legal advice. Please check local bylaws.", "practice_title": "Better Practice: Learn from Neighbors", "badge_done": "Completed 2024", "ex_1_title": "Barn to Loft Living", "ex_1_desc": "\"The old barn stood empty for 10 years. Conversion created two modern rental apartments.\"", "kpi_cost": "Total Cost", "kpi_fund": "Funding Share", "kpi_amort": "Amortization", "comments_title": "Questions & Comments:", "comment_1": "Are there problems with monument protection regarding the large windows?", "placeholder_ask": "Ask a question...", "btn_send": "Send", "badge_ongoing": "Ongoing", "ex_2_title": "Energy Core Renovation", "ex_2_desc": "\"Built in 1970. Heat pump and insulation reduced ancillary costs by 70%.\"", "kpi_invest": "Investment", "kpi_quota": "Funding Quota", "kpi_rent": "Rentability", "comment_2": "Which energy consultant did you have? We are also looking.", "alarm_title": "üîî Construction Alarm: Don't Miss Out!", "alarm_desc": "Get notified when new construction projects go into public disclosure.", "ph_address": "Your Address (Street, No, Zip)", "ph_email": "Your E-Mail", "btn_activate": "Activate", "alarm_footer": "Free & cancel anytime.",
                "modal_title": "Welcome!", "modal_desc": "Please select your region for local funding programs.", "lbl_country": "Country", "lbl_zip": "Zip Code", "modal_error": "This zip code is unfortunately outside our pilot area.", "btn_enter": "Go to Area",
                "lbl_address": "Property Address", "lbl_interest": "Interested in:", "opt_sale": "Sale / Renovation", "opt_interim": "Interim Use", "opt_consult": "Consultation"
            },
            "fr": {
                "nav_back": "‚Üê RETOUR √Ä L'APER√áU", "header_title": "Pr√©server la valeur, assurer l'avenir", "header_sub": "Votre portail central pour la r√©novation, le financement et le d√©veloppement de votre bien immobilier.", "calc_title": "üå± Calculateur de r√©novation", "calc_desc": "Entrez les donn√©es de votre b√¢timent pour d√©terminer le potentiel individuel de plus-value.", "lbl_year": "Ann√©e de construction", "lbl_type": "Type de b√¢timent", "opt_house": "Maison individuelle", "opt_row": "Maison mitoyenne", "opt_multi": "Immeuble collectif", "opt_timber": "Maison √† colombages", "lbl_insulation": "Standard d'isolation actuel", "opt_ins_none": "Inconnu / Pas d'isolation", "opt_ins_old": "Ancien (avant 1995)", "opt_ins_partial": "Partiellement isol√© (ex. toit seul)", "opt_ins_good": "Bon (apr√®s 2005)", "btn_analyze": "Lancer l'analyse", "res_prefix": "R√©sultat pour votre", "res_disclaimer": "*Bas√© sur des moyennes r√©gionales.", "fund_title": "üí∞ Fonds disponibles", "fund_desc": "Programmes actuels pour votre r√©gion :", "fund_badge_1": "Jusqu'√† 45% de subvention", "btn_info": "Info", "fund_badge_2": "Jusqu'√† 70% de financement", "btn_help": "Aide", "fund_local_title": "Programme communal fa√ßades", "fund_badge_3": "Subvention : 5 000 ‚Ç¨", "btn_apply": "Demande", "craft_title": "üõ†Ô∏è Artisans √† proximit√©", "craft_desc": "Trouvez des experts disponibles dans un rayon de 10km.", "craft_placeholder": "Code postal ou m√©tier (ex. couvreur)", "link_call": "Appeler", "tag_insulation": "Isolation", "tag_renovation": "R√©novation", "craft_footer": "Partenaires v√©rifi√©s de la commune", "vacancy_title": "üèöÔ∏è Vacance & Reconversion", "vacancy_desc": "Avez-vous un bien inutilis√© ? Signalez-le volontairement pour des programmes de financement.", "lbl_prop_type": "Type de bien", "opt_vacant_home": "Maison d'habitation", "opt_commercial": "Unit√© commerciale", "btn_submit_confidential": "Envoyer confidentiellement", "coop_title": "ü§ù Coop√©ration avec la commune", "coop_desc": "Nous vous soutenons non seulement financi√®rement mais aussi au niveau de la planification.", "coop_li_1": "Premier conseil gratuit par des architectes municipaux", "coop_li_2": "Aide pour les permis de construire & autorisations", "coop_li_3": "Mise en relation avec des investisseurs ou groupes de construction", "btn_book": "R√©server un rendez-vous", "legal_title": "D√©tenir un bien en toute s√©curit√© juridique", "rights_title": "‚öñÔ∏è Droits, Devoirs & D√©lais", "rights_desc": "√âvitez les amendes et les risques de responsabilit√©. Voici les points les plus importants √† respecter en tant que propri√©taire.", "duty_safe_title": "Obligation de s√©curit√© routi√®re", "duty_safe_desc": "Vous √™tes responsable des dommages caus√©s par le verglas ou la chute de tuiles. <br><strong>Devoir :</strong> D√©blaiement et salage (7h-20h), contr√¥le des arbres.", "duty_energy_title": "Obligations de r√©novation √©nerg√©tique (GEG)", "duty_energy_desc": "Des obligations s'appliquent souvent dans les 2 ans suivant un changement de propri√©taire. <br><strong>Devoir :</strong> Isolation du plafond du dernier √©tage, remplacement des chaudi√®res standard de plus de 30 ans.", "duty_clean_title": "Nettoyage des rues & √âlagage", "duty_clean_desc": "Les plantes ne doivent pas d√©passer sur le trottoir. Les trottoirs doivent souvent √™tre nettoy√©s par les riverains. <br><strong>Devoir :</strong> √âlagage jusqu'√† la limite de propri√©t√©, obligation de balayage.", "legal_disclaimer": "Pas de conseil juridique. Veuillez v√©rifier les statuts locaux.", "practice_title": "Better Practice : Apprendre des voisins", "badge_done": "Termin√© 2024", "ex_1_title": "De la grange au loft", "ex_1_desc": "\"La vieille grange est rest√©e vide pendant 10 ans. La reconversion a cr√©√© deux appartements locatifs modernes.\"", "kpi_cost": "Co√ªt total", "kpi_fund": "Part subvention", "kpi_amort": "Amortissement", "comments_title": "Questions & Commentaires :", "comment_1": "Y a-t-il des probl√®mes avec la protection des monuments pour les grandes fen√™tres ?", "placeholder_ask": "Poser une question...", "btn_send": "Envoyer", "badge_ongoing": "En cours", "ex_2_title": "R√©novation √©nerg√©tique compl√®te", "ex_2_desc": "\"Construction 1970. Gr√¢ce √† la pompe √† chaleur et l'isolation, nous avons r√©duit les charges de 70%.\"", "kpi_invest": "Investissement", "kpi_quota": "Quote-part aide", "kpi_rent": "Rentabilit√©", "comment_2": "Quel conseiller en √©nergie avez-vous eu ? Nous cherchons aussi.", "alarm_title": "üîî Alarme chantier : Ne manquez rien !", "alarm_desc": "Soyez notifi√© lorsque de nouveaux projets de construction dans votre environnement direct (rayon 200m) sont mis √† l'enqu√™te publique.", "ph_address": "Votre adresse", "ph_email": "Votre E-Mail", "btn_activate": "Activer", "alarm_footer": "Gratuit & r√©siliable √† tout moment.",
                "modal_title": "Bienvenue !", "modal_desc": "Veuillez choisir votre r√©gion pour les programmes locaux.", "lbl_country": "Pays", "lbl_zip": "Code Postal", "modal_error": "Ce code postal est malheureusement hors de notre zone pilote.", "btn_enter": "Acc√©der",
                "lbl_address": "Adresse du bien", "lbl_interest": "Int√©ress√© par :", "opt_sale": "Vente / R√©novation", "opt_interim": "Usage interm√©diaire", "opt_consult": "Conseil par la commune"
            }
        };

        // --- PLZ DATENBANK ---
        const plzDatabase = {
            "DE": { "52062": "Aachen", "52064": "Aachen", "52066": "Aachen", "52068": "Aachen", "52070": "Aachen", "52072": "Aachen", "52074": "Aachen", "52076": "Aachen", "52078": "Aachen", "52080": "Aachen", "52477": "Alsdorf", "52499": "Baesweiler", "52249": "Eschweiler", "52134": "Herzogenrath", "52156": "Monschau", "52159": "Roetgen", "52152": "Simmerath", "52222": "Stolberg", "52223": "Stolberg", "52224": "Stolberg", "52146": "W√ºrselen", "52457": "Aldenhoven", "52459": "Inden", "52379": "Langerwehe", "52393": "H√ºrtgenwald", "52396": "Heimbach", "52385": "Nideggen", "52531": "√úbach-Palenberg", "52511": "Geilenkirchen", "53937": "Schleiden", "53940": "Hellenthal" },
            "BE": { "4720": "Kelmis", "4850": "Plombi√®res", "4730": "Raeren", "4731": "Raeren-Eynatten", "4700": "Eupen", "4750": "B√ºtgenbach" },
            "NL": { "6291": "Vaals", "6369": "Simpelveld" }
        };

        function checkRangeNL(plz) {
            const p = parseInt(plz);
            if (p >= 6460 && p <= 6471) return "Kerkrade";
            if (p >= 6370 && p <= 6374) return "Landgraaf";
            if (p >= 6400 && p <= 6433) return "Heerlen";
            return null;
        }

        // --- LANGUAGE & LOCATION LOGIC ---
        let currentLang = 'de';

        function changeLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('baukompass_lang', lang);
            
            // Visual Update Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if(btn.dataset.lang === lang) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // Update Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if(translations[lang][key]) {
                    if(el.tagName === 'INPUT' && el.hasAttribute('placeholder')) {
                        el.placeholder = translations[lang][key];
                    } else {
                        el.innerHTML = translations[lang][key];
                    }
                }
            });
        }

        function handleLocationSubmit(event) {
            event.preventDefault();
            const country = document.getElementById('country-select').value;
            const plz = document.getElementById('plz-input').value.trim();
            const errorBox = document.getElementById('location-error');
            const modal = document.getElementById('location-modal');
            const body = document.getElementById('main-body');
            
            let foundCity = null;
            if (plzDatabase[country] && plzDatabase[country][plz]) foundCity = plzDatabase[country][plz];
            else if (country === 'NL') foundCity = checkRangeNL(plz);

            if (foundCity) {
                const displayText = `in ${foundCity}`;
                document.getElementById('header-location-display').innerText = displayText;
                modal.classList.add('hidden');
                body.style.overflow = 'auto'; // Re-enable scrolling

                // Save location to localStorage
                localStorage.setItem('baukompass_location_city', foundCity);
                localStorage.setItem('baukompass_location_plz', plz);
                localStorage.setItem('baukompass_location_country', country);
            } else {
                errorBox.classList.remove('hidden');
                errorBox.innerText = translations[currentLang].modal_error || "PLZ nicht gefunden.";
            }
        }

        // --- CALCULATION LOGIC ---
        function calculateRenovation() {
            const year = document.getElementById('inp-year').value;
            const type = document.getElementById('inp-type').value;
            const insulation = document.getElementById('inp-insulation').value;
            
            const resultBox = document.getElementById('simulation-result');
            const bar = document.getElementById('energy-bar');
            const textLabel = document.getElementById('energy-text');
            const valueLabel = document.getElementById('value-text');
            const resType = document.getElementById('res-type');
            const resYear = document.getElementById('res-year');

            if (!year || year < 1000 || year > 2030) {
                alert("Bitte geben Sie ein g√ºltiges Baujahr ein.");
                return;
            }

            resultBox.style.display = 'block';
            resType.innerText = type;
            resYear.innerText = year;

            textLabel.innerText = "Berechne Potenzial...";
            valueLabel.innerText = "";
            bar.style.width = "10%";
            bar.style.background = "#e74c3c"; 

            setTimeout(() => {
                let increase = "";
                let width = "0%";
                let color = "";
                let label = "";

                if (year < 1980 && insulation === 'none') {
                    width = "95%"; color = "linear-gradient(90deg, #e74c3c, #2ecc71)";
                    label = (currentLang === 'de') ? "Sprung von H auf A+ m√∂glich" : "Jump H to A+ possible";
                    increase = (currentLang === 'de') ? "+ 35% Wertsteigerung" : "+ 35% Value Increase";
                } else if (year < 2000 && insulation !== 'good') {
                    width = "70%"; color = "linear-gradient(90deg, #f1c40f, #2ecc71)";
                    label = (currentLang === 'de') ? "Sprung von D auf B m√∂glich" : "Jump D to B possible";
                    increase = (currentLang === 'de') ? "+ 18% Wertsteigerung" : "+ 18% Value Increase";
                } else {
                    width = "40%"; color = "#2ecc71";
                    label = (currentLang === 'de') ? "Optimierung der Anlagentechnik" : "Tech Optimization";
                    increase = (currentLang === 'de') ? "+ 5-8% Wertsteigerung" : "+ 5-8% Value Increase";
                }

                bar.style.width = width;
                bar.style.background = color;
                textLabel.innerText = label;
                valueLabel.innerText = (currentLang === 'de' ? "M√∂gliche " : "Possible ") + increase;
            }, 800);
        }

        function addComment(id) {
            const input = document.getElementById('input-' + id);
            const list = document.getElementById('comments-' + id);
            const text = input.value;

            if (text.trim() === "") return;

            const newLi = document.createElement('li');
            newLi.className = 'comment-bubble';
            newLi.innerHTML = '<span class="comment-author">Gast (Gerade eben)</span>' + text;
            
            list.appendChild(newLi);
            input.value = "";
            alert("Danke! Ihr Kommentar wurde ver√∂ffentlicht.");
        }

        // Init on load
        window.addEventListener('load', () => {
            const savedLang = localStorage.getItem('baukompass_lang') || 'de';
            changeLanguage(savedLang);

            // Check for saved location
            const savedCity = localStorage.getItem('baukompass_location_city');
            if (savedCity) {
                document.getElementById('header-location-display').innerText = `in ${savedCity}`;
                document.getElementById('location-modal').classList.add('hidden');
                document.getElementById('main-body').style.overflow = 'auto';
            }
        });

    </script>
</body>
</html>
